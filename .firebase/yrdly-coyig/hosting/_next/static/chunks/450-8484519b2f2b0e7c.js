"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{285:(e,t,a)=>{a.d(t,{$:()=>i,r:()=>o});var s=a(5155),r=a(2115),l=a(4253),n=a(2085),d=a(9434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:i=!1,...c}=e,m=i?l.DX:"button";return(0,s.jsx)(m,{className:(0,d.cn)(o({variant:r,size:n,className:a})),ref:t,...c})});i.displayName="Button"},450:(e,t,a)=>{a.d(t,{R:()=>X});var s=a(5155),r=a(2115),l=a(6766),n=a(1394),d=a(2085),o=a(9434);let i=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,o.cn)(i({variant:a}),t),...r})}var m=a(285),u=a(6695),f=a(7082),p=a(3561),x=a(8763),h=a(7223),g=a(3662),j=a(8098),N=a(8224),v=a(7390),y=a(8030),b=a(5317),w=a(6104),R=a(8856),S=a(4838),C=a(2278);let A=C.bL,I=C.l9,k=C.ZL,E=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});E.displayName=C.hJ.displayName;let z=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(k,{children:[(0,s.jsx)(E,{}),(0,s.jsx)(C.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});z.displayName=C.UC.displayName;let U=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};U.displayName="AlertDialogHeader";let _=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};_.displayName="AlertDialogFooter";let D=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold",a),...r})});D.displayName=C.hE.displayName;let T=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})});T.displayName=C.VY.displayName;let F=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.rc,{ref:t,className:(0,o.cn)((0,m.r)(),a),...r})});F.displayName=C.rc.displayName;let B=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.ZD,{ref:t,className:(0,o.cn)((0,m.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});B.displayName=C.ZD.displayName;var P=a(7242);let L=P.bL,J=P.R6,O=P.Ke;var V=a(5786),M=a(7481),q=a(2177),Z=a(5594),H=a(221),Y=a(7759),G=a(2523),K=a(3672);let $=Z.Ik({text:Z.Yj().min(1,"Comment cannot be empty.")}),W=()=>(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(R.E,{className:"h-8 w-8 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(R.E,{className:"h-3 w-24"}),(0,s.jsx)(R.E,{className:"h-3 w-48"})]})]});function Q(e){var t;let{postId:a}=e,{user:l}=(0,y.A)(),[d,o]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0),u=(0,q.mN)({resolver:(0,H.u)($),defaultValues:{text:""}});(0,r.useEffect)(()=>{let e=(0,b.P)((0,b.rJ)(w.db,"posts",a,"comments"),(0,b.My)("timestamp","asc")),t=(0,b.aQ)(e,e=>{o(e.docs.map(e=>{var t,a;return{id:e.id,...e.data(),timestamp:null!=(a=null==(t=e.data().timestamp)?void 0:t.toDate().toLocaleString())?a:new Date().toLocaleString()}})),c(!1)});return()=>t()},[a]);let f=async e=>{if(!l)return;let t=(0,b.H9)(w.db,"posts",a),s=(0,b.rJ)(w.db,"posts",a,"comments");try{await (0,b.c4)(w.db,async a=>{let r=await a.get(t);if(!r.exists())throw"Post does not exist!";let n=(r.data().commentCount||0)+1;a.update(t,{commentCount:n}),await (0,b.gS)(s,{userId:l.uid,authorName:l.displayName,authorImage:l.photoURL,text:e.text,timestamp:(0,b.O5)()})}),u.reset()}catch(e){console.error("Error adding comment: ",e)}};return(0,s.jsxs)("div",{className:"space-y-4 pt-4",children:[i?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(W,{}),(0,s.jsx)(W,{})]}):d.length>0?d.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsxs)(n.eu,{className:"h-8 w-8",children:[(0,s.jsx)(n.BK,{src:e.authorImage}),(0,s.jsx)(n.q5,{children:null==(t=e.authorName)?void 0:t.charAt(0)})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"bg-muted rounded-lg px-3 py-2",children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:e.authorName}),(0,s.jsx)("p",{className:"text-sm",children:e.text})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.timestamp})]})]},e.id)}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"No comments yet. Be the first to comment!"}),l&&(0,s.jsx)(Y.lV,{...u,children:(0,s.jsxs)("form",{onSubmit:u.handleSubmit(f),className:"flex items-center gap-2",children:[(0,s.jsxs)(n.eu,{className:"h-8 w-8",children:[(0,s.jsx)(n.BK,{src:l.photoURL||""}),(0,s.jsx)(n.q5,{children:null==(t=l.displayName)?void 0:t.charAt(0)})]}),(0,s.jsx)(Y.zB,{control:u.control,name:"text",render:e=>{let{field:t}=e;return(0,s.jsx)(Y.eI,{className:"flex-1",children:(0,s.jsx)(Y.MJ,{children:(0,s.jsx)(G.p,{placeholder:"Write a comment...",...t})})})}}),(0,s.jsx)(m.$,{type:"submit",size:"icon",children:(0,s.jsx)(K.A,{className:"h-4 w-4"})})]})})]})}function X(e){var t;let{post:a}=e,{user:d}=(0,y.A)(),{toast:o}=(0,M.dj)(),[i,C]=(0,r.useState)(null),[k,E]=(0,r.useState)(!0),[P,q]=(0,r.useState)(a.likes||0),[Z,H]=(0,r.useState)(a.commentCount||0),[Y,G]=(0,r.useState)(!1),[K,$]=(0,r.useState)(!1),[W,X]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(E(!0),a.userId)try{let e=(0,b.H9)(w.db,"users",a.userId),t=await (0,b.x7)(e);t.exists()?C({id:t.id,...t.data()}):C({id:a.userId,uid:a.userId,name:a.authorName||"Deleted User",avatarUrl:a.authorImage||"https://placehold.co/100x100.png"})}catch(e){console.error("Error fetching author:",e),C(null)}finally{E(!1)}else C({id:"unknown",uid:"unknown",name:a.authorName||"Anonymous User",avatarUrl:a.authorImage||"https://placehold.co/100x100.png"}),E(!1)})()},[a.userId,a.authorName,a.authorImage]),(0,r.useEffect)(()=>{if(!a.id)return;let e=(0,b.H9)(w.db,"posts",a.id),t=(0,b.aQ)(e,e=>{if(e.exists()){var t;let a=e.data();q((null==(t=a.likedBy)?void 0:t.length)||0),H(a.commentCount||0),d&&a.likedBy&&G(a.likedBy.includes(d.uid))}});return()=>t()},[a.id,d]);let ee=async()=>{if(!d||!a.id)return;let e=(0,b.H9)(w.db,"posts",a.id);Y?await (0,b.mZ)(e,{likedBy:(0,b.C3)(d.uid)}):await (0,b.mZ)(e,{likedBy:(0,b.hq)(d.uid)})},et=async()=>{if(d&&a.id&&d.uid===a.userId)try{await (0,b.kd)((0,b.H9)(w.db,"posts",a.id)),o({title:"Post deleted",description:"Your post has been successfully removed."})}catch(e){console.error("Error deleting post:",e),o({variant:"destructive",title:"Error",description:"Failed to delete post."})}};return(0,s.jsxs)(u.Zp,{className:"overflow-hidden",children:[(0,s.jsxs)(u.aR,{className:"flex flex-row items-center gap-4 p-4",children:[k?(0,s.jsxs)("div",{className:"flex items-center gap-4 w-full",children:[(0,s.jsx)(R.E,{className:"h-10 w-10 rounded-full"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R.E,{className:"h-4 w-[150px]"}),(0,s.jsx)(R.E,{className:"h-3 w-[100px]"})]})]}):i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.eu,{children:[(0,s.jsx)(n.BK,{src:i.avatarUrl,alt:i.name,"data-ai-hint":"person portrait"}),(0,s.jsx)(n.q5,{children:null==(t=i.name)?void 0:t.charAt(0)})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold",children:i.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:a.timestamp})]}),(e=>{switch(e){case"Event":return(0,s.jsx)(c,{variant:"outline",className:"bg-orange-100 text-orange-800 border-orange-200",children:e});case"For Sale":return(0,s.jsx)(c,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-200",children:e});case"Business":return(0,s.jsxs)(c,{variant:"outline",className:"bg-purple-100 text-purple-800 border-purple-200 flex items-center gap-1",children:[(0,s.jsx)(f.A,{className:"h-3 w-3"}),e]});default:return(0,s.jsx)(c,{variant:"secondary",children:e})}})(a.category)]}):(0,s.jsxs)("div",{className:"flex items-center gap-4 w-full",children:[(0,s.jsxs)(n.eu,{children:[(0,s.jsx)(n.BK,{src:"https://placehold.co/100x100.png",alt:"Deleted User"}),(0,s.jsx)(n.q5,{children:"?"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-sm",children:"Deleted User"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:a.timestamp})]})]}),(null==d?void 0:d.uid)===a.userId&&(0,s.jsxs)(A,{children:[(0,s.jsxs)(S.rI,{children:[(0,s.jsx)(S.ty,{asChild:!0,children:(0,s.jsx)(m.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(p.A,{className:"h-5 w-5"})})}),(0,s.jsxs)(S.SQ,{align:"end",children:[(0,s.jsx)(V.R,{postToEdit:a,onOpenChange:$,children:(0,s.jsxs)(S._2,{onSelect:e=>e.preventDefault(),children:[(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Edit"})]})}),(0,s.jsx)(I,{asChild:!0,children:(0,s.jsxs)(S._2,{className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Delete"})]})})]})]}),(0,s.jsxs)(z,{children:[(0,s.jsxs)(U,{children:[(0,s.jsx)(D,{children:"Are you sure?"}),(0,s.jsx)(T,{children:"This action cannot be undone. This will permanently delete your post and all its comments."})]}),(0,s.jsxs)(_,{children:[(0,s.jsx)(B,{children:"Cancel"}),(0,s.jsx)(F,{onClick:et,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})]}),(0,s.jsxs)(L,{open:W,onOpenChange:X,children:[(0,s.jsxs)(u.Wu,{className:"p-4 pt-0",children:[(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:a.text}),a.location&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground mt-2",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-1"}),(0,s.jsx)("span",{children:a.location})]})]}),a.imageUrl&&(0,s.jsx)("div",{className:"relative w-full aspect-video",children:(0,s.jsx)(l.default,{src:a.imageUrl,alt:"Post image",fill:!0,className:"object-cover","data-ai-hint":"neighborhood street"})}),(0,s.jsx)(u.wL,{className:"p-2 bg-background/50",children:(0,s.jsxs)("div",{className:"flex justify-around w-full",children:[(0,s.jsxs)(m.$,{variant:"ghost",className:"flex-1 gap-2",onClick:ee,children:[(0,s.jsx)(j.A,{className:"h-5 w-5 ".concat(Y?"text-red-500 fill-current":"")}),(0,s.jsx)("span",{className:"text-sm",children:P})]}),(0,s.jsx)(J,{asChild:!0,children:(0,s.jsxs)(m.$,{variant:"ghost",className:"flex-1 gap-2",children:[(0,s.jsx)(N.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"text-sm",children:Z})]})}),(0,s.jsxs)(m.$,{variant:"ghost",className:"flex-1 gap-2",children:[(0,s.jsx)(v.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"text-sm",children:"Share"})]})]})}),(0,s.jsx)(O,{children:(0,s.jsx)("div",{className:"p-4 pt-0",children:(0,s.jsx)(Q,{postId:a.id})})})]})]})}},1394:(e,t,a)=>{a.d(t,{BK:()=>o,eu:()=>d,q5:()=>i});var s=a(5155),r=a(2115),l=a(5977),n=a(9434);let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.bL,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});d.displayName=l.bL.displayName;let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l._V,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",a),...r})});o.displayName=l._V.displayName;let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.H4,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});i.displayName=l.H4.displayName},2523:(e,t,a)=>{a.d(t,{p:()=>n});var s=a(5155),r=a(2115),l=a(9434);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},4838:(e,t,a)=>{a.d(t,{SQ:()=>u,_2:()=>f,lp:()=>p,mB:()=>x,rI:()=>c,ty:()=>m});var s=a(5155),r=a(2115),l=a(6215),n=a(3158),d=a(518),o=a(154),i=a(9434);let c=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,r.forwardRef((e,t)=>{let{className:a,inset:r,children:d,...o}=e;return(0,s.jsxs)(l.ZP,{ref:t,className:(0,i.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...o,children:[d,(0,s.jsx)(n.A,{className:"ml-auto"})]})}).displayName=l.ZP.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.G5,{ref:t,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=l.G5.displayName;let u=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsx)(l.UC,{ref:t,sideOffset:r,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});u.displayName=l.UC.displayName;let f=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(l.q7,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n})});f.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...o}=e;return(0,s.jsxs)(l.H_,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})}),r]})}).displayName=l.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(l.hN,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(o.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.hN.displayName;let p=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})});p.displayName=l.JU.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});x.displayName=l.wv.displayName},5057:(e,t,a)=>{a.d(t,{J:()=>i});var s=a(5155),r=a(2115),l=a(968),n=a(2085),d=a(9434);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.b,{ref:t,className:(0,d.cn)(o(),a),...r})});i.displayName=l.b.displayName},5786:(e,t,a)=>{a.d(t,{R:()=>D});var s=a(5155),r=a(2177),l=a(221),n=a(5594),d=a(285),o=a(2115),i=a(5821),c=a(5318),m=a(9434);let u=i.bL,f=i.l9,p=i.ZL;i.bm;let x=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hJ,{ref:t,className:(0,m.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});x.displayName=i.hJ.displayName;let h=o.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(p,{children:[(0,s.jsx)(x,{}),(0,s.jsxs)(i.UC,{ref:t,className:(0,m.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[r,(0,s.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=i.UC.displayName;let g=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,m.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};g.displayName="DialogHeader";let j=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,m.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};j.displayName="DialogFooter";let N=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hE,{ref:t,className:(0,m.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});N.displayName=i.hE.displayName;let v=o.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.VY,{ref:t,className:(0,m.cn)("text-sm text-muted-foreground",a),...r})});v.displayName=i.VY.displayName;var y=a(2523),b=a(8539),w=a(7759),R=a(9409),S=a(4301),C=a(3662),A=a(1394),I=a(8030),k=a(5317),E=a(858),z=a(6104),U=a(7481);let _=n.Ik({text:n.Yj().min(1,"Post can't be empty.").max(500),category:n.k5(["General","Event","For Sale","Business"]),location:n.Yj().optional()});function D(e){var t;let{children:a,preselectedCategory:n,postToEdit:i,onOpenChange:c}=e,{user:m}=(0,I.A)(),{toast:p}=(0,U.dj)(),[x,D]=(0,o.useState)(!1),[T,F]=(0,o.useState)(!1),[B,P]=(0,o.useState)(null),L=!!i,J=(0,r.mN)({resolver:(0,l.u)(_),defaultValues:{text:"",category:n||"General",location:""}});async function O(e){if(!m)return void p({variant:"destructive",title:"Not authenticated",description:"You must be logged in to create or edit a post."});F(!0);try{let a=(null==i?void 0:i.imageUrl)||"";if(B){let e=(0,E.KR)(z.IG,"posts/".concat(m.uid,"/").concat(Date.now(),"_").concat(B.name)),t=await (0,E.D)(e,B);a=await (0,E.qk)(t.ref)}let s={...e,imageUrl:a};if(L){let e=(0,k.H9)(z.db,"posts",i.id);await (0,k.mZ)(e,s),p({title:"Post updated!",description:"Your post has been successfully updated."})}else{var t;await (0,k.gS)((0,k.rJ)(z.db,"posts"),{userId:m.uid,authorName:m.displayName||"Anonymous User",authorImage:m.photoURL||"https://placehold.co/100x100.png?text=".concat((null==(t=m.displayName)?void 0:t.charAt(0))||"A"),...s,timestamp:(0,k.O5)(),likes:0,likedBy:[],commentCount:0}),p({title:"Post created!",description:"Your post is now live."})}J.reset({text:"",category:n||"General",location:""}),P(null),D(!1)}catch(e){console.error("Error submitting post:",e),p({variant:"destructive",title:"Error",description:"Failed to submit post."})}finally{F(!1)}}return(0,o.useEffect)(()=>{L?J.reset({text:i.text,category:i.category,location:i.location||""}):J.reset({text:"",category:n||"General",location:""})},[i,n,J,L,x]),(0,s.jsxs)(u,{open:x,onOpenChange:e=>{D(e),c&&c(e)},children:[(0,s.jsx)(f,{asChild:!0,children:a||(0,s.jsxs)("div",{className:"flex items-center gap-4 w-full",children:[(0,s.jsxs)(A.eu,{children:[(0,s.jsx)(A.BK,{src:(null==m?void 0:m.photoURL)||"https://placehold.co/100x100.png","data-ai-hint":"person portrait"}),(0,s.jsx)(A.q5,{children:(null==m||null==(t=m.displayName)?void 0:t.charAt(0))||"U"})]}),(0,s.jsx)("div",{className:"flex-1 text-left text-muted-foreground cursor-pointer hover:bg-muted p-2 rounded-md border border-dashed",children:"What's happening in your neighborhood?"}),(0,s.jsx)(d.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(S.A,{className:"h-6 w-6 text-primary"})})]})}),(0,s.jsxs)(h,{className:"sm:max-w-[525px]",children:[(0,s.jsxs)(g,{children:[(0,s.jsx)(N,{children:L?"Edit Post":"Create Post"}),(0,s.jsx)(v,{children:L?"Make changes to your post here.":"Share an update with your neighborhood."})]}),(0,s.jsx)(w.lV,{...J,children:(0,s.jsxs)("form",{onSubmit:J.handleSubmit(O),className:"space-y-4",children:[(0,s.jsx)(w.zB,{control:J.control,name:"text",render:e=>{let{field:t}=e;return(0,s.jsxs)(w.eI,{children:[(0,s.jsx)(w.MJ,{children:(0,s.jsx)(b.T,{placeholder:"What's happening in the neighborhood?",className:"resize-none min-h-[120px]",...t})}),(0,s.jsx)(w.C5,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(w.zB,{control:J.control,name:"category",render:e=>{let{field:t}=e;return(0,s.jsx)(w.eI,{children:(0,s.jsxs)(R.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(w.MJ,{children:(0,s.jsx)(R.bq,{children:(0,s.jsx)(R.yv,{placeholder:"Select a category"})})}),(0,s.jsxs)(R.gC,{children:[(0,s.jsx)(R.eb,{value:"General",children:"General"}),(0,s.jsx)(R.eb,{value:"Event",children:"Event"}),(0,s.jsx)(R.eb,{value:"For Sale",children:"For Sale"}),(0,s.jsx)(R.eb,{value:"Business",children:"Business"})]})]})})}}),(0,s.jsx)(w.zB,{control:J.control,name:"location",render:e=>{let{field:t}=e;return(0,s.jsx)(w.eI,{children:(0,s.jsx)(w.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(C.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(y.p,{placeholder:"Add a location",className:"pl-8",...t})]})})})}})]}),(0,s.jsxs)(w.eI,{children:[(0,s.jsx)(w.lR,{children:"Add an image"}),(0,s.jsx)(w.MJ,{children:(0,s.jsx)(y.p,{type:"file",accept:"image/*",onChange:e=>{var t;(null==(t=e.target.files)?void 0:t[0])&&P(e.target.files[0])}})})]}),(null==i?void 0:i.imageUrl)&&!B&&(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Current image: ",(0,s.jsx)("a",{href:i.imageUrl,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"view image"})]}),(0,s.jsx)(j,{children:(0,s.jsx)(d.$,{type:"submit",className:"w-full",variant:"default",disabled:T,children:T?L?"Saving...":"Posting...":L?"Save Changes":"Post"})})]})})]})]})}},6104:(e,t,a)=>{a.d(t,{IG:()=>c,db:()=>i,hJ:()=>m,j2:()=>o,sm:()=>u});var s=a(3915),r=a(3004),l=a(5317),n=a(858);let d=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({projectId:"yrdly-coyig",appId:"1:166095077947:web:2f5285213610bbd893521e",storageBucket:"yrdly-coyig.firebasestorage.app",apiKey:"AIzaSyCOE_L6g9c3J6jhcajVzNkC4flEao4Av2I",authDomain:"yrdly-coyig.firebaseapp.com",measurementId:"",messagingSenderId:"166095077947"}),o=(0,r.xI)(d),i=(0,l.aU)(d),c=(0,n.c7)(d),m=new r.HF,u=new r.LD("apple.com")},6695:(e,t,a)=>{a.d(t,{BT:()=>i,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>d,wL:()=>m});var s=a(5155),r=a(2115),l=a(9434);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});d.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});i.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})});m.displayName="CardFooter"},7481:(e,t,a)=>{a.d(t,{dj:()=>u});var s=a(2115);let r=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],i={toasts:[]};function c(e){i=d(i,e),o.forEach(e=>{e(i)})}function m(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(i);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7759:(e,t,a)=>{a.d(t,{C5:()=>g,MJ:()=>h,eI:()=>p,lR:()=>x,lV:()=>i,zB:()=>m});var s=a(5155),r=a(2115),l=a(4253),n=a(2177),d=a(9434),o=a(5057);let i=n.Op,c=r.createContext({}),m=e=>{let{...t}=e;return(0,s.jsx)(c.Provider,{value:{name:t.name},children:(0,s.jsx)(n.xI,{...t})})},u=()=>{let e=r.useContext(c),t=r.useContext(f),{getFieldState:a,formState:s}=(0,n.xW)(),l=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:d}=t;return{id:d,name:e.name,formItemId:"".concat(d,"-form-item"),formDescriptionId:"".concat(d,"-form-item-description"),formMessageId:"".concat(d,"-form-item-message"),...l}},f=r.createContext({}),p=r.forwardRef((e,t)=>{let{className:a,...l}=e,n=r.useId();return(0,s.jsx)(f.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,d.cn)("space-y-2",a),...l})})});p.displayName="FormItem";let x=r.forwardRef((e,t)=>{let{className:a,...r}=e,{error:l,formItemId:n}=u();return(0,s.jsx)(o.J,{ref:t,className:(0,d.cn)(l&&"text-destructive",a),htmlFor:n,...r})});x.displayName="FormLabel";let h=r.forwardRef((e,t)=>{let{...a}=e,{error:r,formItemId:n,formDescriptionId:d,formMessageId:o}=u();return(0,s.jsx)(l.DX,{ref:t,id:n,"aria-describedby":r?"".concat(d," ").concat(o):"".concat(d),"aria-invalid":!!r,...a})});h.displayName="FormControl",r.forwardRef((e,t)=>{let{className:a,...r}=e,{formDescriptionId:l}=u();return(0,s.jsx)("p",{ref:t,id:l,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})}).displayName="FormDescription";let g=r.forwardRef((e,t)=>{var a;let{className:r,children:l,...n}=e,{error:o,formMessageId:i}=u(),c=o?String(null!=(a=null==o?void 0:o.message)?a:""):l;return c?(0,s.jsx)("p",{ref:t,id:i,className:(0,d.cn)("text-sm font-medium text-destructive",r),...n,children:c}):null});g.displayName="FormMessage"},8030:(e,t,a)=>{a.d(t,{A:()=>i,AuthProvider:()=>o});var s=a(5155),r=a(2115),l=a(3004),n=a(6104);let d=(0,r.createContext)({user:null,loading:!0}),o=e=>{let{children:t}=e,[a,o]=(0,r.useState)(null),[i,c]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=(0,l.hg)(n.j2,e=>{o(e),c(!1)});return()=>e()},[]),(0,s.jsx)(d.Provider,{value:{user:a,loading:i},children:t})},i=()=>(0,r.useContext)(d)},8539:(e,t,a)=>{a.d(t,{T:()=>n});var s=a(5155),r=a(2115),l=a(9434);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});n.displayName="Textarea"},8856:(e,t,a)=>{a.d(t,{E:()=>l});var s=a(5155),r=a(9434);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...a})}},9409:(e,t,a)=>{a.d(t,{bq:()=>u,eb:()=>h,gC:()=>x,l6:()=>c,yv:()=>m});var s=a(5155),r=a(2115),l=a(3433),n=a(9556),d=a(7381),o=a(518),i=a(9434);let c=l.bL;l.YJ;let m=l.WT,u=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsxs)(l.l9,{ref:t,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...d,children:[r,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.PP,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})});f.displayName=l.PP.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wn,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=l.wn.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...d}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...d,children:[(0,s.jsx)(f,{}),(0,s.jsx)(l.LM,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(p,{})]})})});x.displayName=l.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=l.JU.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(l.q7,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(l.p4,{children:r})]})});h.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.wv.displayName},9434:(e,t,a)=>{a.d(t,{cn:()=>l});var s=a(2596),r=a(9688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}}}]);