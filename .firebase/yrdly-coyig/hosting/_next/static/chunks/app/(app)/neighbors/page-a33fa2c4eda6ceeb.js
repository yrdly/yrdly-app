(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[135],{3662:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(157).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4063:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(157).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},5351:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var l=a(5155),t=a(2115),r=a(5317),i=a(6104),c=a(8030),n=a(5695),d=a(1394),o=a(285),u=a(6695),x=a(8856),m=a(3662),h=a(4063);let j=(0,a(157).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var f=a(7481),p=a(9409),g=a(9166);let v=()=>(0,l.jsx)(u.Zp,{children:(0,l.jsxs)(u.Wu,{className:"p-4 flex items-center gap-4",children:[(0,l.jsx)(x.E,{className:"h-16 w-16 rounded-full"}),(0,l.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,l.jsx)(x.E,{className:"h-5 w-32"}),(0,l.jsx)(x.E,{className:"h-4 w-48"}),(0,l.jsx)(x.E,{className:"h-4 w-40"})]}),(0,l.jsx)(x.E,{className:"h-10 w-28"})]})});function N(){let{user:e}=(0,c.A)(),s=(0,n.useRouter)(),{toast:a}=(0,f.dj)(),[x,N]=(0,t.useState)([]),[y,b]=(0,t.useState)(!0),[w,A]=(0,t.useState)({state:"all",lga:"all"});(0,t.useEffect)(()=>{if(!e)return;let s=(0,r.P)((0,r.rJ)(i.db,"users"),(0,r._M)("uid","!=",e.uid)),a=(0,r.aQ)(s,e=>{N(e.docs.map(e=>({id:e.id,...e.data()}))),b(!1)});return()=>a()},[e]);let k=(e,s)=>{A(a=>{let l={...a,[e]:s};return"state"===e&&(l.lga="all"),l})},E=(0,t.useMemo)(()=>x.filter(e=>{var s,a;let l="all"===w.state||(null==(s=e.location)?void 0:s.state)===w.state,t="all"===w.lga||(null==(a=e.location)?void 0:a.lga)===w.lga;return l&&t}),[x,w]),M=async l=>{if(!e)return void a({variant:"destructive",title:"You must be logged in."});let t=(0,r.rJ)(i.db,"conversations"),c=(0,r.P)(t,(0,r._M)("participantIds","array-contains",e.uid)),n=await (0,r.GG)(c),d=null;if(n.forEach(e=>{e.data().participantIds.includes(l.uid)&&(d=e.id)}),d)s.push("/messages?convId=".concat(d));else try{let a=await (0,r.gS)(t,{participantIds:[e.uid,l.uid],createdAt:(0,r.O5)(),lastMessage:null});s.push("/messages?convId=".concat(a.id))}catch(e){console.error("Error creating conversation: ",e),a({variant:"destructive",title:"Error",description:"Could not start a conversation."})}},C=e=>e?[e.city,e.lga,e.state].filter(Boolean).join(", "):null,P=(0,t.useMemo)(()=>"all"!==w.state&&g.co[w.state]&&g.co[w.state]||[],[w.state]);return(0,l.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl md:text-3xl font-bold font-headline",children:"Find Neighbors"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Connect with other members of your community."})]}),(0,l.jsxs)("div",{className:"flex w-full md:w-auto md:flex-row gap-2",children:[(0,l.jsxs)(p.l6,{onValueChange:e=>k("state",e),value:w.state,children:[(0,l.jsx)(p.bq,{className:"w-full md:w-[180px]",children:(0,l.jsx)(p.yv,{placeholder:"Filter by State"})}),(0,l.jsxs)(p.gC,{children:[(0,l.jsx)(p.eb,{value:"all",children:"All States"}),g.gg.map(e=>(0,l.jsx)(p.eb,{value:e,children:e},e))]})]}),(0,l.jsxs)(p.l6,{onValueChange:e=>k("lga",e),value:w.lga,disabled:"all"===w.state,children:[(0,l.jsx)(p.bq,{className:"w-full md:w-[180px]",children:(0,l.jsx)(p.yv,{placeholder:"Filter by LGA"})}),(0,l.jsxs)(p.gC,{children:[(0,l.jsx)(p.eb,{value:"all",children:"All LGAs"}),P.map(e=>(0,l.jsx)(p.eb,{value:e,children:e},e))]})]})]})]}),y?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(v,{}),(0,l.jsx)(v,{}),(0,l.jsx)(v,{})]}):E.length>0?(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map(e=>(0,l.jsx)(u.Zp,{children:(0,l.jsxs)(u.Wu,{className:"p-4 flex items-start gap-4",children:[(0,l.jsxs)(d.eu,{className:"h-16 w-16 border",children:[(0,l.jsx)(d.BK,{src:e.avatarUrl,alt:e.name}),(0,l.jsx)(d.q5,{children:e.name.charAt(0)})]}),(0,l.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,l.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),e.location&&(0,l.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,l.jsx)(m.A,{className:"h-4 w-4 mr-1"}),(0,l.jsx)("span",{children:C(e.location)})]}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground pt-1",children:e.bio||"No bio yet."})]}),(0,l.jsxs)(o.$,{size:"sm",onClick:()=>M(e),children:[(0,l.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Message"]})]})},e.id))}):(0,l.jsxs)(u.Zp,{className:"text-center p-16",children:[(0,l.jsx)("div",{className:"flex justify-center mb-4",children:(0,l.jsx)(j,{className:"h-12 w-12 text-muted-foreground"})}),(0,l.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"No neighbors found"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"No neighbors match the current filters. Try selecting a different location."})]})]})}},5564:(e,s,a)=>{Promise.resolve().then(a.bind(a,5351))},5695:(e,s,a)=>{"use strict";var l=a(8999);a.o(l,"usePathname")&&a.d(s,{usePathname:function(){return l.usePathname}}),a.o(l,"useRouter")&&a.d(s,{useRouter:function(){return l.useRouter}})},8856:(e,s,a)=>{"use strict";a.d(s,{E:()=>r});var l=a(5155),t=a(9434);function r(e){let{className:s,...a}=e;return(0,l.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-muted",s),...a})}}},e=>{var s=s=>e(e.s=s);e.O(0,[992,644,340,172,838,26,434,408,441,684,358],()=>s(5564)),_N_E=e.O()}]);