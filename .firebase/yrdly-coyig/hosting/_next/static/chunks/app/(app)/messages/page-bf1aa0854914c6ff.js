(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[164],{285:(e,r,t)=>{"use strict";t.d(r,{$:()=>c});var s=t(5155),a=t(2115),i=t(4253),l=t(2085),n=t(9434);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,r)=>{let{className:t,variant:a,size:l,asChild:c=!1,...o}=e,u=c?i.DX:"button";return(0,s.jsx)(u,{className:(0,n.cn)(d({variant:a,size:l,className:t})),ref:r,...o})});c.displayName="Button"},1394:(e,r,t)=>{"use strict";t.d(r,{BK:()=>d,eu:()=>n,q5:()=>c});var s=t(5155),a=t(2115),i=t(5977),l=t(9434);let n=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.bL,{ref:r,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...a})});n.displayName=i.bL.displayName;let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i._V,{ref:r,className:(0,l.cn)("aspect-square h-full w-full",t),...a})});d.displayName=i._V.displayName;let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.H4,{ref:r,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...a})});c.displayName=i.H4.displayName},2523:(e,r,t)=>{"use strict";t.d(r,{p:()=>l});var s=t(5155),a=t(2115),i=t(9434);let l=a.forwardRef((e,r)=>{let{className:t,type:a,...l}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...l})});l.displayName="Input"},4607:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>N});var s=t(5155),a=t(2115),i=t(1394),l=t(285),n=t(6695),d=t(2523),c=t(7655),o=t(9434);let u=a.forwardRef((e,r)=>{let{className:t,children:a,...i}=e;return(0,s.jsxs)(c.bL,{ref:r,className:(0,o.cn)("relative overflow-hidden",t),...i,children:[(0,s.jsx)(c.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,s.jsx)(f,{}),(0,s.jsx)(c.OK,{})]})});u.displayName=c.bL.displayName;let f=a.forwardRef((e,r)=>{let{className:t,orientation:a="vertical",...i}=e;return(0,s.jsx)(c.VM,{ref:r,orientation:a,className:(0,o.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...i,children:(0,s.jsx)(c.lr,{className:"relative flex-1 rounded-full bg-border"})})});f.displayName=c.VM.displayName;var m=t(5074),x=t(4063),p=t(7687),h=t(8539);function g(e){let{conversations:r,currentUser:t}=e,[c,f]=(0,a.useState)(r),[g,v]=(0,a.useState)(r.length>0?r[0]:null),[b,j]=(0,a.useState)("");return(0,s.jsxs)(n.Zp,{className:"h-[calc(100vh-10rem)] w-full flex",children:[(0,s.jsxs)("div",{className:"w-1/3 border-r",children:[(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(d.p,{placeholder:"Search messages",className:"pl-8"})]})}),(0,s.jsx)(u,{className:"h-[calc(100%-4.5rem)]",children:c.length>0?c.map(e=>(0,s.jsxs)("div",{className:(0,o.cn)("flex items-center gap-4 p-4 cursor-pointer hover:bg-muted/50",(null==g?void 0:g.id)===e.id&&"bg-muted"),onClick:()=>v(e),children:[(0,s.jsxs)(i.eu,{children:[(0,s.jsx)(i.BK,{src:e.participant.avatarUrl,alt:e.participant.name,"data-ai-hint":"person portrait"}),(0,s.jsx)(i.q5,{children:e.participant.name.charAt(0)})]}),(0,s.jsxs)("div",{className:"flex-1 truncate",children:[(0,s.jsx)("p",{className:"font-semibold",children:e.participant.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.messages[e.messages.length-1].text})]})]},e.id)):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-4 text-center",children:[(0,s.jsx)(x.A,{className:"h-10 w-10 mb-2"}),(0,s.jsx)("p",{className:"font-semibold",children:"No conversations yet"}),(0,s.jsx)("p",{className:"text-sm",children:"Start a new message to see it here."})]})})]}),(0,s.jsx)("div",{className:"w-2/3 flex flex-col",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b",children:[(0,s.jsxs)(i.eu,{children:[(0,s.jsx)(i.BK,{src:g.participant.avatarUrl,alt:g.participant.name,"data-ai-hint":"person portrait"}),(0,s.jsx)(i.q5,{children:g.participant.name.charAt(0)})]}),(0,s.jsx)("p",{className:"font-semibold",children:g.participant.name})]}),(0,s.jsx)(u,{className:"flex-1 p-4",children:(0,s.jsx)("div",{className:"space-y-4",children:g.messages.map(e=>(0,s.jsxs)("div",{className:(0,o.cn)("flex gap-3",e.sender.id===t.id?"justify-end":"justify-start"),children:[e.sender.id!==t.id&&(0,s.jsxs)(i.eu,{className:"h-8 w-8",children:[(0,s.jsx)(i.BK,{src:e.sender.avatarUrl,"data-ai-hint":"person portrait"}),(0,s.jsx)(i.q5,{children:e.sender.name.charAt(0)})]}),(0,s.jsxs)("div",{className:(0,o.cn)("rounded-lg px-4 py-2 max-w-xs lg:max-w-md",e.sender.id===t.id?"bg-primary text-primary-foreground":"bg-muted"),children:[(0,s.jsx)("p",{children:e.text}),(0,s.jsx)("p",{className:(0,o.cn)("text-xs opacity-70 mt-1",e.sender.id===t.id?"text-right":"text-left"),children:e.timestamp})]})]},e.id))})}),(0,s.jsx)("div",{className:"p-4 border-t",children:(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),""===b.trim()||!g)return;let r={id:"m".concat(Date.now()),sender:t,text:b,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),read:!0},s=c.map(e=>e.id===g.id?{...e,messages:[...e.messages,r]}:e);f(s),v(s.find(e=>e.id===g.id)),j("")},className:"flex items-center gap-2",children:[(0,s.jsx)(h.T,{placeholder:"Type a message...",value:b,onChange:e=>j(e.target.value),className:"flex-1 resize-none",rows:1}),(0,s.jsx)(l.$,{type:"submit",size:"icon",disabled:!b.trim(),children:(0,s.jsx)(p.A,{className:"h-5 w-5"})})]})})]}):(0,s.jsx)("div",{className:"flex flex-1 items-center justify-center text-muted-foreground",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(x.A,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),(0,s.jsx)("p",{className:"font-semibold",children:"Select a conversation"}),(0,s.jsx)("p",{className:"text-sm",children:"Choose a chat from the left to start messaging."})]})})})]})}var v=t(8030),b=t(5317),j=t(6104);function N(){let{user:e}=(0,v.A)(),[r,t]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),n=e?{id:e.uid,uid:e.uid,name:e.displayName||"Anonymous",avatarUrl:e.photoURL||"https://placehold.co/100x100.png"}:null;return((0,a.useEffect)(()=>{if(!e)return void l(!1);let r=(0,b.P)((0,b.rJ)(j.db,"conversations"),(0,b._M)("participants","array-contains",e.uid)),s=(0,b.aQ)(r,e=>{t([]),l(!1)});return()=>s()},[e]),i||!n)?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsx)(g,{conversations:r,currentUser:n})}},4711:(e,r,t)=>{Promise.resolve().then(t.bind(t,4607))},6104:(e,r,t)=>{"use strict";t.d(r,{IG:()=>o,db:()=>c,j2:()=>d});var s=t(3915),a=t(3004),i=t(5317),l=t(858);let n=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({projectId:"yrdly-coyig",appId:"1:166095077947:web:2f5285213610bbd893521e",storageBucket:"yrdly-coyig.firebasestorage.app",apiKey:"AIzaSyCOE_L6g9c3J6jhcajVzNkC4flEao4Av2I",authDomain:"yrdly-coyig.firebaseapp.com",measurementId:"",messagingSenderId:"166095077947"}),d=(0,a.xI)(n),c=(0,i.aU)(n),o=(0,l.c7)(n)},6695:(e,r,t)=>{"use strict";t.d(r,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>l,aR:()=>n,wL:()=>u});var s=t(5155),a=t(2115),i=t(9434);let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});l.displayName="Card";let n=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});n.displayName="CardHeader";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},8030:(e,r,t)=>{"use strict";t.d(r,{A:()=>c,AuthProvider:()=>d});var s=t(5155),a=t(2115),i=t(3004),l=t(6104);let n=(0,a.createContext)({user:null,loading:!0}),d=e=>{let{children:r}=e,[t,d]=(0,a.useState)(null),[c,o]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=(0,i.hg)(l.j2,e=>{d(e),o(!1)});return()=>e()},[]),(0,s.jsx)(n.Provider,{value:{user:t,loading:c},children:r})},c=()=>(0,a.useContext)(n)},8539:(e,r,t)=>{"use strict";t.d(r,{T:()=>l});var s=t(5155),a=t(2115),i=t(9434);let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...a})});l.displayName="Textarea"},9434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var s=t(2596),a=t(9688);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[992,644,340,504,780,12,441,684,358],()=>r(4711)),_N_E=e.O()}]);