(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{2523:(e,s,a)=>{"use strict";a.d(s,{p:()=>t});var i=a(5155),r=a(2115),l=a(9434);let t=r.forwardRef((e,s)=>{let{className:a,type:r,...t}=e;return(0,i.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...t})});t.displayName="Input"},3116:(e,s,a)=>{Promise.resolve().then(a.bind(a,8772))},5057:(e,s,a)=>{"use strict";a.d(s,{J:()=>c});var i=a(5155),r=a(2115),l=a(968),t=a(2085),d=a(9434);let n=(0,t.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,i.jsx)(l.b,{ref:s,className:(0,d.cn)(n(),a),...r})});c.displayName=l.b.displayName},8539:(e,s,a)=>{"use strict";a.d(s,{T:()=>t});var i=a(5155),r=a(2115),l=a(9434);let t=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,i.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});t.displayName="Textarea"},8772:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>L});var i=a(5155),r=a(285),l=a(6695),t=a(2523),d=a(5057),n=a(2115),c=a(4884),o=a(9434);let u=n.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,i.jsx)(c.bL,{className:(0,o.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:s,children:(0,i.jsx)(c.zi,{className:(0,o.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});u.displayName=c.bL.displayName;var x=a(704);let h=x.bL,f=n.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,i.jsx)(x.B8,{ref:s,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});f.displayName=x.B8.displayName;let m=n.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,i.jsx)(x.l9,{ref:s,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});m.displayName=x.l9.displayName;let p=n.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,i.jsx)(x.UC,{ref:s,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});p.displayName=x.UC.displayName;var j=a(8539),g=a(1394),v=a(8030),b=a(6104),y=a(5695),N=a(3004),w=a(5317),k=a(858),C=a(7481),S=a(9409),R=a(9166);function L(){var e;let{user:s}=(0,v.A)(),a=(0,y.useRouter)(),{toast:c}=(0,C.dj)(),[o,x]=(0,n.useState)((null==s?void 0:s.displayName)||""),[L,J]=(0,n.useState)(""),[B,P]=(0,n.useState)(null),[F,T]=(0,n.useState)(!1),[Z,E]=(0,n.useState)({state:"",lga:"",city:"",ward:""});(0,n.useEffect)(()=>{s&&((async()=>{let e=(0,w.H9)(b.db,"users",s.uid),a=await (0,w.x7)(e);if(a.exists()){let e=a.data();J(e.bio||""),e.location&&E(e.location),s.displayName||x(e.name||"")}})(),s.displayName&&x(s.displayName))},[s]);let U=(e,s)=>{let a={...Z,[e]:s};"state"===e&&(a.lga="",a.city="",a.ward=""),"lga"===e&&(a.ward="",a.city=""),"lga"===e&&$(R.$q[s]||[]),E(a)},q=async()=>{if(s){T(!0);try{let e=s.photoURL;if(B){let a=(0,k.KR)(b.IG,"avatars/".concat(s.uid,"/").concat(B.name)),i=await (0,k.D)(a,B);e=await (0,k.qk)(i.ref)}await (0,N.r7)(s,{displayName:o,photoURL:e}),await (0,w.BN)((0,w.H9)(b.db,"users",s.uid),{name:o,bio:L,location:Z,avatarUrl:e,email:s.email},{merge:!0}),c({title:"Profile Updated",description:"Your profile has been successfully updated."})}catch(e){console.error("Error updating profile: ",e),c({variant:"destructive",title:"Error",description:"Failed to update profile."})}finally{T(!1)}}},A=async()=>{await b.j2.signOut(),a.push("/login")},_=Z.state?R.co[Z.state]:[],[W,$]=(0,n.useState)([]);return(0,i.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold font-headline",children:"Settings"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Manage your account and preferences."})]}),(0,i.jsxs)(h,{defaultValue:"profile",children:[(0,i.jsxs)(f,{className:"grid w-full grid-cols-3",children:[(0,i.jsx)(m,{value:"profile",children:"Profile"}),(0,i.jsx)(m,{value:"security",children:"Security"}),(0,i.jsx)(m,{value:"notifications",children:"Notifications"})]}),(0,i.jsx)(p,{value:"profile",children:(0,i.jsxs)(l.Zp,{children:[(0,i.jsxs)(l.aR,{children:[(0,i.jsx)(l.ZB,{children:"Profile"}),(0,i.jsx)(l.BT,{children:"This is how others will see you on the site."})]}),(0,i.jsxs)(l.Wu,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)(g.eu,{className:"h-20 w-20",children:[(0,i.jsx)(g.BK,{src:(null==s?void 0:s.photoURL)||"",alt:(null==s?void 0:s.displayName)||""}),(0,i.jsx)(g.q5,{children:null==s||null==(e=s.displayName)?void 0:e.charAt(0)})]}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)(d.J,{htmlFor:"picture",children:"Profile Picture"}),(0,i.jsx)(t.p,{id:"picture",type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&P(e.target.files[0])},accept:"image/*"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"name",children:"Name"}),(0,i.jsx)(t.p,{id:"name",value:o,onChange:e=>x(e.target.value)})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{children:"Location"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)(d.J,{htmlFor:"state",className:"text-xs",children:"State"}),(0,i.jsxs)(S.l6,{value:Z.state||"",onValueChange:e=>U("state",e),children:[(0,i.jsx)(S.bq,{id:"state",children:(0,i.jsx)(S.yv,{placeholder:"Select your state"})}),(0,i.jsx)(S.gC,{children:R.gg.map(e=>(0,i.jsx)(S.eb,{value:e,children:e},e))})]})]}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)(d.J,{htmlFor:"lga",className:"text-xs",children:"LGA"}),(0,i.jsxs)(S.l6,{value:Z.lga||"",onValueChange:e=>U("lga",e),disabled:!Z.state,children:[(0,i.jsx)(S.bq,{id:"lga",children:(0,i.jsx)(S.yv,{placeholder:"Select your LGA"})}),(0,i.jsx)(S.gC,{children:_.map(e=>(0,i.jsx)(S.eb,{value:e,children:e},e))})]})]}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)(d.J,{htmlFor:"ward",className:"text-xs",children:"Ward"}),(0,i.jsxs)(S.l6,{value:Z.ward||"",onValueChange:e=>U("ward",e),disabled:!Z.lga,children:[(0,i.jsx)(S.bq,{id:"ward",children:(0,i.jsx)(S.yv,{placeholder:"Select your Ward"})}),(0,i.jsx)(S.gC,{children:W.map(e=>(0,i.jsx)(S.eb,{value:e,children:e},e))})]})]})]}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)(d.J,{htmlFor:"city",className:"text-xs",children:"City / Town / Street"}),(0,i.jsx)(t.p,{id:"city",placeholder:"e.g. Opebi Street",value:Z.city||"",onChange:e=>U("city",e.target.value)})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"bio",children:"Bio"}),(0,i.jsx)(j.T,{id:"bio",placeholder:"Tell us about yourself",className:"min-h-[100px] resize-none",value:L,onChange:e=>J(e.target.value)})]})]}),(0,i.jsx)(l.wL,{children:(0,i.jsx)(r.$,{onClick:q,disabled:F,children:F?"Saving...":"Save Changes"})})]})}),(0,i.jsx)(p,{value:"security",children:(0,i.jsxs)(l.Zp,{children:[(0,i.jsxs)(l.aR,{children:[(0,i.jsx)(l.ZB,{children:"Password"}),(0,i.jsx)(l.BT,{children:"Change your password here. After saving, you'll be logged out."})]}),(0,i.jsxs)(l.Wu,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"current-password",children:"Current Password"}),(0,i.jsx)(t.p,{id:"current-password",type:"password"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"new-password",children:"New Password"}),(0,i.jsx)(t.p,{id:"new-password",type:"password"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.J,{htmlFor:"confirm-password",children:"Confirm New Password"}),(0,i.jsx)(t.p,{id:"confirm-password",type:"password"})]})]}),(0,i.jsx)(l.wL,{children:(0,i.jsx)(r.$,{children:"Save Password"})})]})}),(0,i.jsx)(p,{value:"notifications",children:(0,i.jsxs)(l.Zp,{children:[(0,i.jsxs)(l.aR,{children:[(0,i.jsx)(l.ZB,{children:"Notifications"}),(0,i.jsx)(l.BT,{children:"Manage how you receive notifications."})]}),(0,i.jsxs)(l.Wu,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[(0,i.jsx)(d.J,{className:"text-base",children:"Push Notifications"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive notifications on your device."})]}),(0,i.jsx)(u,{defaultChecked:!0})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[(0,i.jsx)(d.J,{className:"text-base",children:"Email Newsletter"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get weekly updates on neighborhood activity."})]}),(0,i.jsx)(u,{})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,i.jsxs)("div",{className:"space-y-0.5",children:[(0,i.jsx)(d.J,{className:"text-base",children:"New Message Alerts"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Be notified when you receive a new message."})]}),(0,i.jsx)(u,{defaultChecked:!0})]})]}),(0,i.jsx)(l.wL,{children:(0,i.jsx)(r.$,{children:"Save Preferences"})})]})})]}),(0,i.jsxs)(l.Zp,{className:"mt-6 border-destructive",children:[(0,i.jsxs)(l.aR,{children:[(0,i.jsx)(l.ZB,{className:"text-destructive",children:"Logout"}),(0,i.jsx)(l.BT,{children:"Logs you out of your account on this device."})]}),(0,i.jsx)(l.wL,{children:(0,i.jsx)(r.$,{variant:"destructive",onClick:A,children:"Logout"})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[992,644,340,172,838,26,434,216,408,441,684,358],()=>s(3116)),_N_E=e.O()}]);