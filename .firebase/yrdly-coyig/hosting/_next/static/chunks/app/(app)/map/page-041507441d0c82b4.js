(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{6654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return o}});let n=r(2115);function o(e,t){let r=(0,n.useRef)(null),o=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=o.current;t&&(o.current=null,t())}else e&&(r.current=l(e,n)),t&&(o.current=l(t,n))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8574:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>en});var n=r(5155),o=r(285),l=r(6695),a=r(2115),s=r(5185),i=r(6101),d=r(6081),u=r(9178),c=r(2293),p=r(7900),f=r(1285),h=r(5152),v=r(4378),m=r(8905),x=r(3540),g=a.forwardRef((e,t)=>{let{children:r,...o}=e,l=a.Children.toArray(r),s=l.find(y);if(s){let e=s.props.children,r=l.map(t=>t!==s?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,n.jsx)(j,{...o,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,n.jsx)(j,{...o,ref:t,children:r})});g.displayName="Slot";var j=a.forwardRef((e,t)=>{let{children:r,...n}=e;if(a.isValidElement(r)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r),o=function(e,t){let r={...t};for(let n in t){let o=e[n],l=t[n];/^on[A-Z]/.test(n)?o&&l?r[n]=(...e)=>{l(...e),o(...e)}:o&&(r[n]=o):"style"===n?r[n]={...o,...l}:"className"===n&&(r[n]=[o,l].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==a.Fragment&&(o.ref=t?(0,i.t)(t,e):e),a.cloneElement(r,o)}return a.Children.count(r)>1?a.Children.only(null):null});j.displayName="SlotClone";var b=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});function y(e){return a.isValidElement(e)&&e.type===b}var C=r(5845),w=r(8168),N=r(1114),P="Popover",[R,O]=(0,d.A)(P,[h.Bk]),A=(0,h.Bk)(),[E,_]=R(P),k=e=>{let{__scopePopover:t,children:r,open:o,defaultOpen:l,onOpenChange:s,modal:i=!1}=e,d=A(t),u=a.useRef(null),[c,p]=a.useState(!1),[v=!1,m]=(0,C.i)({prop:o,defaultProp:l,onChange:s});return(0,n.jsx)(h.bL,{...d,children:(0,n.jsx)(E,{scope:t,contentId:(0,f.B)(),triggerRef:u,open:v,onOpenChange:m,onOpenToggle:a.useCallback(()=>m(e=>!e),[m]),hasCustomAnchor:c,onCustomAnchorAdd:a.useCallback(()=>p(!0),[]),onCustomAnchorRemove:a.useCallback(()=>p(!1),[]),modal:i,children:r})})};k.displayName=P;var F="PopoverAnchor";a.forwardRef((e,t)=>{let{__scopePopover:r,...o}=e,l=_(F,r),s=A(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:d}=l;return a.useEffect(()=>(i(),()=>d()),[i,d]),(0,n.jsx)(h.Mz,{...s,...o,ref:t})}).displayName=F;var M="PopoverTrigger",D=a.forwardRef((e,t)=>{let{__scopePopover:r,...o}=e,l=_(M,r),a=A(r),d=(0,i.s)(t,l.triggerRef),u=(0,n.jsx)(x.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":L(l.open),...o,ref:d,onClick:(0,s.m)(e.onClick,l.onOpenToggle)});return l.hasCustomAnchor?u:(0,n.jsx)(h.Mz,{asChild:!0,...a,children:u})});D.displayName=M;var S="PopoverPortal",[z,V]=R(S,{forceMount:void 0}),W=e=>{let{__scopePopover:t,forceMount:r,children:o,container:l}=e,a=_(S,t);return(0,n.jsx)(z,{scope:t,forceMount:r,children:(0,n.jsx)(m.C,{present:r||a.open,children:(0,n.jsx)(v.Z,{asChild:!0,container:l,children:o})})})};W.displayName=S;var I="PopoverContent",B=a.forwardRef((e,t)=>{let r=V(I,e.__scopePopover),{forceMount:o=r.forceMount,...l}=e,a=_(I,e.__scopePopover);return(0,n.jsx)(m.C,{present:o||a.open,children:a.modal?(0,n.jsx)(G,{...l,ref:t}):(0,n.jsx)(Z,{...l,ref:t})})});B.displayName=I;var G=a.forwardRef((e,t)=>{let r=_(I,e.__scopePopover),o=a.useRef(null),l=(0,i.s)(t,o),d=a.useRef(!1);return a.useEffect(()=>{let e=o.current;if(e)return(0,w.Eq)(e)},[]),(0,n.jsx)(N.A,{as:g,allowPinchZoom:!0,children:(0,n.jsx)(q,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.m)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),d.current||null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:(0,s.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;d.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,s.m)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),Z=a.forwardRef((e,t)=>{let r=_(I,e.__scopePopover),o=a.useRef(!1),l=a.useRef(!1);return(0,n.jsx)(q,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var n,a;null==(n=e.onCloseAutoFocus)||n.call(e,t),t.defaultPrevented||(o.current||null==(a=r.triggerRef.current)||a.focus(),t.preventDefault()),o.current=!1,l.current=!1},onInteractOutside:t=>{var n,a;null==(n=e.onInteractOutside)||n.call(e,t),t.defaultPrevented||(o.current=!0,"pointerdown"===t.detail.originalEvent.type&&(l.current=!0));let s=t.target;(null==(a=r.triggerRef.current)?void 0:a.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&l.current&&t.preventDefault()}})}),q=a.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:o,onOpenAutoFocus:l,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:v,...m}=e,x=_(I,r),g=A(r);return(0,c.Oh)(),(0,n.jsx)(p.n,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:l,onUnmountAutoFocus:a,children:(0,n.jsx)(u.qW,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:v,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:f,onDismiss:()=>x.onOpenChange(!1),children:(0,n.jsx)(h.UC,{"data-state":L(x.open),role:"dialog",id:x.contentId,...g,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),T="PopoverClose";function L(e){return e?"open":"closed"}a.forwardRef((e,t)=>{let{__scopePopover:r,...o}=e,l=_(T,r);return(0,n.jsx)(x.sG.button,{type:"button",...o,ref:t,onClick:(0,s.m)(e.onClick,()=>l.onOpenChange(!1))})}).displayName=T,a.forwardRef((e,t)=>{let{__scopePopover:r,...o}=e,l=A(r);return(0,n.jsx)(h.i3,{...l,...o,ref:t})}).displayName="PopoverArrow";var U=r(9434);let J=a.forwardRef((e,t)=>{let{className:r,align:o="center",sideOffset:l=4,...a}=e;return(0,n.jsx)(W,{children:(0,n.jsx)(B,{ref:t,align:o,sideOffset:l,className:(0,U.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...a})})});J.displayName=B.displayName;var K=r(9409);let Q=(0,r(157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var $=r(3662),H=r(6766),X=r(7624),Y=r(5317),ee=r(6104);let et=e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t},er=e=>{let t=Math.abs(et(e))%80+10,r=Math.abs(et(e.split("").reverse().join("")))%80+10;return{top:"".concat(t,"%"),left:"".concat(r,"%")}};function en(){let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(!0),[i,d]=(0,a.useState)("all");(0,a.useEffect)(()=>{let e=(0,Y.P)((0,Y.rJ)(ee.db,"posts")),r=(0,Y.aQ)(e,e=>{t(e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>e.location)),s(!1)});return()=>r()},[]);let u=(0,a.useMemo)(()=>"all"===i?e:e.filter(e=>e.category===i),[e,i]),c=(0,a.useMemo)(()=>u.map(e=>({...e,position:er(e.id)})),[u]);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold font-headline",children:"Neighborhood Map"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"See what's happening around you."})]}),(0,n.jsx)("div",{className:"flex items-center gap-4",children:(0,n.jsxs)(K.l6,{onValueChange:d,defaultValue:"all",children:[(0,n.jsx)(K.bq,{className:"w-[180px]",children:(0,n.jsx)(K.yv,{placeholder:"Filter by category"})}),(0,n.jsxs)(K.gC,{children:[(0,n.jsx)(K.eb,{value:"all",children:"All Posts"}),(0,n.jsx)(K.eb,{value:"General",children:"General"}),(0,n.jsx)(K.eb,{value:"Event",children:"Events"}),(0,n.jsx)(K.eb,{value:"For Sale",children:"For Sale"})]})]})})]}),(0,n.jsx)(l.Zp,{children:(0,n.jsx)(l.Wu,{className:"p-4",children:(0,n.jsxs)("div",{className:"relative w-full h-[600px] rounded-lg overflow-hidden bg-muted",children:[(0,n.jsx)(H.default,{src:"https://placehold.co/1200x800.png",fill:!0,objectFit:"cover",alt:"Neighborhood map","data-ai-hint":"city map"}),r?(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50",children:(0,n.jsx)(Q,{className:"h-8 w-8 animate-spin text-primary"})}):c.map(e=>(0,n.jsxs)(k,{children:[(0,n.jsx)(D,{asChild:!0,children:(0,n.jsx)(o.$,{variant:"secondary",size:"icon",className:"absolute rounded-full w-10 h-10 shadow-lg border-2 border-background",style:{top:e.position.top,left:e.position.left,transform:"translate(-50%, -50%)"},children:(0,n.jsx)($.A,{className:"h-5 w-5 text-primary"})})}),(0,n.jsx)(J,{className:"w-80 p-0",children:(0,n.jsx)(X.R,{post:e})})]},e.id))]})})})]})}},8875:(e,t,r)=>{Promise.resolve().then(r.bind(r,8574))}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,340,504,780,506,327,766,450,844,441,684,358],()=>t(8875)),_N_E=e.O()}]);