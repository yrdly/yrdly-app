(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{8574:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>en});var n=t(5155),o=t(285),a=t(6695),l=t(2115),s=t(5185),i=t(6101),d=t(6081),c=t(9178),u=t(2293),p=t(7900),f=t(1285),h=t(5152),v=t(4378),m=t(8905),x=t(3540),g=l.forwardRef((e,r)=>{let{children:t,...o}=e,a=l.Children.toArray(t),s=a.find(y);if(s){let e=s.props.children,t=a.map(r=>r!==s?r:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,n.jsx)(j,{...o,ref:r,children:l.isValidElement(e)?l.cloneElement(e,void 0,t):null})}return(0,n.jsx)(j,{...o,ref:r,children:t})});g.displayName="Slot";var j=l.forwardRef((e,r)=>{let{children:t,...n}=e;if(l.isValidElement(t)){let e=function(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?e.props.ref:e.props.ref||e.ref}(t),o=function(e,r){let t={...r};for(let n in r){let o=e[n],a=r[n];/^on[A-Z]/.test(n)?o&&a?t[n]=(...e)=>{a(...e),o(...e)}:o&&(t[n]=o):"style"===n?t[n]={...o,...a}:"className"===n&&(t[n]=[o,a].filter(Boolean).join(" "))}return{...e,...t}}(n,t.props);return t.type!==l.Fragment&&(o.ref=r?(0,i.t)(r,e):e),l.cloneElement(t,o)}return l.Children.count(t)>1?l.Children.only(null):null});j.displayName="SlotClone";var b=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});function y(e){return l.isValidElement(e)&&e.type===b}var C=t(5845),w=t(8168),N=t(1114),P="Popover",[R,O]=(0,d.A)(P,[h.Bk]),A=(0,h.Bk)(),[E,k]=R(P),F=e=>{let{__scopePopover:r,children:t,open:o,defaultOpen:a,onOpenChange:s,modal:i=!1}=e,d=A(r),c=l.useRef(null),[u,p]=l.useState(!1),[v=!1,m]=(0,C.i)({prop:o,defaultProp:a,onChange:s});return(0,n.jsx)(h.bL,{...d,children:(0,n.jsx)(E,{scope:r,contentId:(0,f.B)(),triggerRef:c,open:v,onOpenChange:m,onOpenToggle:l.useCallback(()=>m(e=>!e),[m]),hasCustomAnchor:u,onCustomAnchorAdd:l.useCallback(()=>p(!0),[]),onCustomAnchorRemove:l.useCallback(()=>p(!1),[]),modal:i,children:t})})};F.displayName=P;var _="PopoverAnchor";l.forwardRef((e,r)=>{let{__scopePopover:t,...o}=e,a=k(_,t),s=A(t),{onCustomAnchorAdd:i,onCustomAnchorRemove:d}=a;return l.useEffect(()=>(i(),()=>d()),[i,d]),(0,n.jsx)(h.Mz,{...s,...o,ref:r})}).displayName=_;var D="PopoverTrigger",M=l.forwardRef((e,r)=>{let{__scopePopover:t,...o}=e,a=k(D,t),l=A(t),d=(0,i.s)(r,a.triggerRef),c=(0,n.jsx)(x.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":L(a.open),...o,ref:d,onClick:(0,s.m)(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?c:(0,n.jsx)(h.Mz,{asChild:!0,...l,children:c})});M.displayName=D;var S="PopoverPortal",[z,V]=R(S,{forceMount:void 0}),W=e=>{let{__scopePopover:r,forceMount:t,children:o,container:a}=e,l=k(S,r);return(0,n.jsx)(z,{scope:r,forceMount:t,children:(0,n.jsx)(m.C,{present:t||l.open,children:(0,n.jsx)(v.Z,{asChild:!0,container:a,children:o})})})};W.displayName=S;var I="PopoverContent",B=l.forwardRef((e,r)=>{let t=V(I,e.__scopePopover),{forceMount:o=t.forceMount,...a}=e,l=k(I,e.__scopePopover);return(0,n.jsx)(m.C,{present:o||l.open,children:l.modal?(0,n.jsx)(G,{...a,ref:r}):(0,n.jsx)(Z,{...a,ref:r})})});B.displayName=I;var G=l.forwardRef((e,r)=>{let t=k(I,e.__scopePopover),o=l.useRef(null),a=(0,i.s)(r,o),d=l.useRef(!1);return l.useEffect(()=>{let e=o.current;if(e)return(0,w.Eq)(e)},[]),(0,n.jsx)(N.A,{as:g,allowPinchZoom:!0,children:(0,n.jsx)(q,{...e,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.m)(e.onCloseAutoFocus,e=>{var r;e.preventDefault(),d.current||null==(r=t.triggerRef.current)||r.focus()}),onPointerDownOutside:(0,s.m)(e.onPointerDownOutside,e=>{let r=e.detail.originalEvent,t=0===r.button&&!0===r.ctrlKey;d.current=2===r.button||t},{checkForDefaultPrevented:!1}),onFocusOutside:(0,s.m)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),Z=l.forwardRef((e,r)=>{let t=k(I,e.__scopePopover),o=l.useRef(!1),a=l.useRef(!1);return(0,n.jsx)(q,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var n,l;null==(n=e.onCloseAutoFocus)||n.call(e,r),r.defaultPrevented||(o.current||null==(l=t.triggerRef.current)||l.focus(),r.preventDefault()),o.current=!1,a.current=!1},onInteractOutside:r=>{var n,l;null==(n=e.onInteractOutside)||n.call(e,r),r.defaultPrevented||(o.current=!0,"pointerdown"===r.detail.originalEvent.type&&(a.current=!0));let s=r.target;(null==(l=t.triggerRef.current)?void 0:l.contains(s))&&r.preventDefault(),"focusin"===r.detail.originalEvent.type&&a.current&&r.preventDefault()}})}),q=l.forwardRef((e,r)=>{let{__scopePopover:t,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:s,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:v,...m}=e,x=k(I,t),g=A(t);return(0,u.Oh)(),(0,n.jsx)(p.n,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:a,onUnmountAutoFocus:l,children:(0,n.jsx)(c.qW,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:v,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:f,onDismiss:()=>x.onOpenChange(!1),children:(0,n.jsx)(h.UC,{"data-state":L(x.open),role:"dialog",id:x.contentId,...g,...m,ref:r,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),T="PopoverClose";function L(e){return e?"open":"closed"}l.forwardRef((e,r)=>{let{__scopePopover:t,...o}=e,a=k(T,t);return(0,n.jsx)(x.sG.button,{type:"button",...o,ref:r,onClick:(0,s.m)(e.onClick,()=>a.onOpenChange(!1))})}).displayName=T,l.forwardRef((e,r)=>{let{__scopePopover:t,...o}=e,a=A(t);return(0,n.jsx)(h.i3,{...a,...o,ref:r})}).displayName="PopoverArrow";var U=t(9434);let J=l.forwardRef((e,r)=>{let{className:t,align:o="center",sideOffset:a=4,...l}=e;return(0,n.jsx)(W,{children:(0,n.jsx)(B,{ref:r,align:o,sideOffset:a,className:(0,U.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});J.displayName=B.displayName;var K=t(9409);let Q=(0,t(157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var $=t(3662),H=t(6766),X=t(450),Y=t(5317),ee=t(6104);let er=e=>{let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r},et=e=>{let r=Math.abs(er(e))%80+10,t=Math.abs(er(e.split("").reverse().join("")))%80+10;return{top:"".concat(r,"%"),left:"".concat(t,"%")}};function en(){let[e,r]=(0,l.useState)([]),[t,s]=(0,l.useState)(!0),[i,d]=(0,l.useState)("all");(0,l.useEffect)(()=>{let e=(0,Y.P)((0,Y.rJ)(ee.db,"posts")),t=(0,Y.aQ)(e,e=>{r(e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>e.location)),s(!1)});return()=>t()},[]);let c=(0,l.useMemo)(()=>"all"===i?e:e.filter(e=>e.category===i),[e,i]),u=(0,l.useMemo)(()=>c.map(e=>({...e,position:et(e.id)})),[c]);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold font-headline",children:"Neighborhood Map"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"See what's happening around you."})]}),(0,n.jsx)("div",{className:"flex items-center gap-4",children:(0,n.jsxs)(K.l6,{onValueChange:d,defaultValue:"all",children:[(0,n.jsx)(K.bq,{className:"w-[180px]",children:(0,n.jsx)(K.yv,{placeholder:"Filter by category"})}),(0,n.jsxs)(K.gC,{children:[(0,n.jsx)(K.eb,{value:"all",children:"All Posts"}),(0,n.jsx)(K.eb,{value:"General",children:"General"}),(0,n.jsx)(K.eb,{value:"Event",children:"Events"}),(0,n.jsx)(K.eb,{value:"For Sale",children:"For Sale"})]})]})})]}),(0,n.jsx)(a.Zp,{children:(0,n.jsx)(a.Wu,{className:"p-4",children:(0,n.jsxs)("div",{className:"relative w-full h-[600px] rounded-lg overflow-hidden bg-muted",children:[(0,n.jsx)(H.default,{src:"https://placehold.co/1200x800.png",fill:!0,objectFit:"cover",alt:"Neighborhood map","data-ai-hint":"city map"}),t?(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50",children:(0,n.jsx)(Q,{className:"h-8 w-8 animate-spin text-primary"})}):u.map(e=>(0,n.jsxs)(F,{children:[(0,n.jsx)(M,{asChild:!0,children:(0,n.jsx)(o.$,{variant:"secondary",size:"icon",className:"absolute rounded-full w-10 h-10 shadow-lg border-2 border-background",style:{top:e.position.top,left:e.position.left,transform:"translate(-50%, -50%)"},children:(0,n.jsx)($.A,{className:"h-5 w-5 text-primary"})})}),(0,n.jsx)(J,{className:"w-80 p-0",children:(0,n.jsx)(X.R,{post:e})})]},e.id))]})})})]})}},8875:(e,r,t)=>{Promise.resolve().then(t.bind(t,8574))}},e=>{var r=r=>e(e.s=r);e.O(0,[992,644,340,172,838,26,646,434,766,567,672,450,441,684,358],()=>r(8875)),_N_E=e.O()}]);